---
layout: post
title: Python tutorial
categories: Python
---

### 1. 流程控制

流程控制语句：
* while
* if
* for
    - 不迭代算术递增数值，也不给予用户定义迭代步骤和暂停条件的能力
    - 只迭代列表或字符串等任意序列，迭代顺序与在序列中出现顺序一致
* break、continue、else
    - 循环语句支持 else 子句，例如 for 循环循环完毕，while 的循环条件为假，
    - 但是 break 语句终止循环时，不执行 else 子句
* pass
* match

### 2. 函数

定义函数：
* def 函数名 (形参列表)
* 按值调用，但是值是对象的引用，因此叫做对象引用调用更好
* 函数定义在当前**符号表**中把**函数名和函数对象关联起来**

函数定义中的参数：
1. 默认值参数
    - 如果调用时参数没有被赋值，使用默认值
    - 默认值在函数定义时就会被评估
2. 关键字参数
    - 调用时根据关键字来赋值
    - 最后一个形参为 **name 形式时，接收一个字典
    - *name 形式，接收一个元组
3. 特殊参数
    - 函数定义例子：`def f(pos1, pos2 /, pos_or_kwd, *, kwd1, kwd2):`
    - 分别对应位置、位置或关键字、关键字参数传递方式
    - 位置或关键字方式：可以按位置或关键字传递给函数，默认形式
4. 任意实参列表
    - 使用 *name 和 **name 的形式，传入任意长度参数

相关术语：
* 命名空间：存放变量的场所，命名空间有局部、全局和内置的，还是对象中的嵌套命名空间。
* 嵌套作用域：在一个定义范围内引用变量的能力。例如、在另一函数之内定义的函数可以引用前者的变量。注意嵌套作用域默认只对引用有效而对赋值无效。
* 装饰器：返回值为另一个函数的函数，常用的有 classmethod(), staticmethod()

~~~
def f(arg):
    ...
f = staticmethod(f)

@staticmethod
def f(arg):
    ...
~~~

解包：
* 适用情况：函数要求独立的位置参数，但实参在列表或元组里
* 用 * 操作符把实参放入到对应的位置参数中
* 用 ** 操作符可以把实参放入到对应的关键字参数中

lambda 表达式：
* 创建匿名函数
* 语法上：是单个表达式；语义上：常规函数定义的语法糖

文档字符串约定：
* 第一行为对用用途的简要摘要
* 之后空行，并接若干段落

函数注解：
* 用户定义函数中类型信息的说明
* 形参标注方式：形参名后面加冒号，后接表达式

### 3. 数据结构

列表对象的方法：
* 插入元素
    * list.append(x)         末尾插入一个元素
    * list.extend(iterable)  插入可迭代对象
    * list.insert(i, x)      插入到指定位置
* 删除元素
    * list.remove(x)    删除第一个 x
    * list.pop(\[i])    删除最后一个元素/删除指定位置元素
    * list.clear()      删除多有元素  
* 查找元素
    * list.index(x)     返回第一个值为 x 的索引
    * list.count(x)     返回元素 x 出现的次数
* 排序
    * list.sort(*, key=None, reverse=False)    就地排序
    * list.reverse()
* list.copy()    浅拷贝

列表推导式：
* 对序列或可迭代对象的每个元素应用某种操作，用生成的结果创建新列表
* 放括号内包含：一个表达式、for 子句，0 个或多个 for 或 if 子句

del 语句：
* 按索引，从列表中移除元素

元组：
* 由多个用逗号分隔的值组成，圆括号可有可无，可以看作元组打包
* 创建空元组：()
* 创建一个元素的元组：('hello',)
* 序列解包：右侧为元组，左侧为变量，自动为变量赋值

集合：
* 空集合创建：set()
* 带有元素的集合可以直接使用花括号
* 可以使用集合推导式创建

字典：
* 字典以关键字作为索引，通常是字符串或数字
* 空字典：{}
* 用 del 删除键值对 del tel\[key]
* list(d): 返回键列表
* 检查字典里是否存在某个键：in
* 可以使用字典推导式创建

**循环的技巧：**
* 字典中：使用 items() 方法同时取出键和值
* 序列中：使用 enumerate() 函数同时取出位置索引和值
* 同时循环两个或多个序列：zip() 函数可以将元素一一匹配
* 逆向循环序列：reversed()
* 排序序列：sorted()
* 去除序列中的重复元素：set()
* 如果要在循环中修改列表的内容，应该创建新列表

### 4. 模块

模块：包含 Python 定义和语句的文件，文件名是模块名加后缀名 `.py`
* 在模块内部，通过全局变量 `__name__` 可以获取模块名
* 语句用于初始化模块，且在 import 语句第一次遇到模块名时执行。
* 内置的函数和变量放在标注模块 builtins 里。大多数的模块将 `__builtins__` 作为全局变量提供，通常是这个模块。

import 语句：
* `import 模块名`
    - 导入模块名到当前的符号表中
    - 模块另有自己的**私有符号表**，用作模块所有函数的全局符号表
* `from 模块名 import 函数名`
    - 直接把模块里的名称导入到另一个模块的符号表
    - 但是不会导入模块名
* `from 模块名 import *`
    - 导入所有不以下划线 (_) 开头的名称
* `import 模块名 as 新名称`
    - 直接把 as 后的名称与导入模块绑定

以脚本方式执行模块：
* `python 模块名称 <arguments>`
* 会执行模块里的代码，但把 `__name__` 赋值为 `__main__`
* 特殊用法

~~~
if __name__ == "__main__":
    脚本要执行的语句
~~~

模块搜索路径，例如搜索 spam 模块：
* 首先查找**内置模块**中是否有该模块
* 从 **sys.path 变量**中的目录列表中查找 spam.py 文件
    - sys.path 初始化包含以下位置
    - 输入脚本的目录 (或当前目录)
    - PYTHONPATH

已编译的 Python 文件：
* Python 把模块的编译版放在 `__pycache__` 目录中
* 文件名为 module.version.pyc，version 一般是 Python 版本号

dir () 函数：
* 查找模块定义的名称，包括变量、模块、函数等
* 返回经过排序的字符串列表
* 没有参数，dir 列出当前定义的名称

#### 包

* 包是一种用 “点式模块名” 构造 Python 模块**命名空间**的方法，可以看作**模块的集合**
* 只把包含 `__init__.py` 文件的目录当成包
* `__init__.py` 可以是一个空文件，也可以执行包的初始化代码

* `import sound.effects.echo` 
* 从 sound 包中的 effects 子包中导入 echo 模块
* `from sound.effects import echo`
* 从 sound 的 effects 子包中，导入 echo 模块，放入当前的符号表中
* `from sound.effects.echo import echofilter`
* 从 sound 的 effects 子包的 echo 模块中，导入 echofilter 函数

import 和 from package import item 的区别：
* from package import item 中，item 可以是子模块、也可以是包中定义的函数、类、变量
* **import 后边最小只能到模块**

子包参考，子包引用兄弟包的模块时：
* 可以使用绝对导入
* 可以使用相对导入
     - `from . import echo`
     - `from .. import formats`
     - `from ..filters import equalizer`


